/*
@module binding
@requires jQuery

Provides declarative data binding from JavaScript objects to DOM elements.
*/
/*
@private

Ignore event handler, avoids making functions for each property
*/
(function(){var e,t,n,r,i;r=function(){},n={properties:{},subscribe:function(t,r){return this.properties[r]=this.properties[r]||[],this.properties[r].length===0&&e(n).on("data-bind-"+r,function(e,t,n){var i,s,o,u,a;u=this.properties[r],a=[];for(s=0,o=u.length;s<o;s++)i=u[s],a.push(i.trigger("data-bind-"+r+".binder",[t,n]));return a}),this.properties[r].push(t)},unsubscribe:function(e,t){return this.properties[t]=(this.properties[t]||[]).filter(function(t){return!t.is(e)})}},t=function(e,t,i){return binder.proxyObject(t,r,function(t,r,i,s){return e(n).trigger("data-bind-"+r,[t,i])}),e("[data-bind]",e(i)).each(function(r,i){return function(){var r,s,o;return o=e(i),r=o.data("bind"),o.data("boundto.binder",t),o.is("input")?(s="val",o.on("change.binder keyup.binder keydown.binder mouseup.binder",function(e){return t[r]=o.val()})):s="text",n.subscribe(o,r),o.on("data-bind-"+r+".binder",function(e,t,n){if(o.data("boundto.binder")===t)return o[s](n),o.trigger("datachange",[o[0],t,r,n])}),o[s](t[r])}()}),i},i=function(e,t){return e("[data-bind]",e(t)).each(function(t,r){var i,s;return s=e(r),i=s.data("bind"),s.off(".binder"),s.data("boundto.binder",null),n.unsubscribe(s,i)}),t},e=jQuery,e.fn.extend({binder:function(n){var r;return r=e.fn.binder,this.each(function(r,s){return n?(i(e,s),t(e,n,s)):i(e,s)})}})}).call(this),function(){var e,t,n;e=["push","unshift","pop","shift","reverse","sort","splice"],t=function(n,r,i,s){var o,u,a,f,l,c,h;if(!n)return null;if(typeof n!="object")return n;if(n!=null?n.__proxied__:void 0)return n;r=r||function(e,t,n,r){},i=i||function(e,t,n,r){},s=s||{},o=function(e,o,u){return typeof u=="object"&&t(u,r,i,{parent:n}),r(n,e,o,s),i(n,e,u,s),u};for(a in n){f=n[a];if(Array.isArray(f)){l=function(){var e;return e=f[u],f[u]=function(){var s,o,u,l;r(n,a,f),o=e.apply(f,arguments);for(u=0,l=arguments.length;u<l;u++)s=arguments[u],t(s,r,i,{parent:f});return i(n,a,f),o}};for(c=0,h=e.length;c<h;c++)u=e[c],l()}f=t(f,r,i,{parent:n}),n.watch(a,o)}return Object.defineProperty(n,"__proxied__",{enumerable:!1,value:!0}),n},n=this,typeof module!="undefined"&&module!==null&&(typeof module!="undefined"&&module!==null?module.exports:void 0)&&(n=module.exports);if(n!=null?!n.binder:!void 0)n.binder={};n.binder.proxyObject=t}.call(this),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var n=this[e],r=n,i=function(){return r},s=function(i){return n=r,r=t.call(this,e,n,i)};delete this[e]&&Object.defineProperty(this,e,{get:i,set:s,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}});